(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de705"],{"863d":function(e,t,a){"use strict";a.r(t);var i,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-8",staticStyle:{"background-color":"rgba(255, 255, 255, 0.2)"},attrs:{headers:e.headers,items:e.files,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{staticStyle:{"background-color":"rgba(255, 255, 255, 0.2)"},attrs:{flat:""}},[a("v-toolbar-title",[e._v("团队文件空间")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-chip",{attrs:{color:"blue darken-4",label:"",outlined:""}},[e._v(e._s(e.teamName)+":"+e._s(e.filePath))]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-icon",{on:{click:e.pathBack}},[e._v(" mdi-arrow-left ")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-spacer"),a("v-icon",{attrs:{"x-large":""},on:{click:function(t){return e.addItem("FILE")}}},[e._v(" mdi-file-plus-outline ")]),a("v-icon",{attrs:{"x-large":""},on:{click:function(t){return e.addItem("DIR")}}},[e._v(" mdi-folder-plus-outline ")]),a("v-dialog",{attrs:{"max-width":"500px",transition:"dialog-bottom-transition",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Are you sure you want to "+e._s(e.state)+" this "+e._s(e.editedItem.FileType)+"?")]),a("v-card-text",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},["add"==e.state?a("v-text-field",{attrs:{rules:e.rules.mk_fileNameRules},model:{value:e.editedItem.FileName,callback:function(t){e.$set(e.editedItem,"FileName",t)},expression:"editedItem.FileName"}}):e._e()],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Cancel")]),"delete"==e.state?a("v-btn",{attrs:{color:"red darken-1",text:"",disabled:!e.valid},on:{click:function(t){return e.deleteItemConfirm()}}},[e._v("Delete")]):"add"==e.state?a("v-btn",{attrs:{color:"green darken-1",text:"",disabled:!e.valid},on:{click:function(t){return e.addItemConfirm()}}},[e._v("Add")]):e._e(),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",transition:"dialog-bottom-transition",persistent:""},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Old "+e._s(e.editedItem.FileType)+" name:"+e._s(e.editedOldName))]),a("v-card-text",{attrs:{label:"New FileName"}},[e._v(" Maybe you would change it to： "),a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules.mk_fileNameRules},model:{value:e.editedItem.FileName,callback:function(t){e.$set(e.editedItem,"FileName",t)},expression:"editedItem.FileName"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Close ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.update}},[e._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.iconType",fn:function(t){var i=t.item;return["DIR"==i.FileType?a("v-icon",{staticClass:"mr-2",on:{click:function(t){return e.goToPath(i)}}},[e._v(" mdi-folder-outline ")]):a("v-icon",{staticClass:"mr-2",on:{click:function(t){return e.openFile(i)}}},[e._v(" mdi-file-outline ")])]}},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[""==e.filePath?a("v-btn",{attrs:{text:"",outlined:""},on:{click:e.initialize}},[e._v(" Get My Files")]):e._e()]},proxy:!0}],null,!0)})],1)],1),a("v-snackbar",{scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[a("v-btn",e._b({attrs:{color:"red",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",i,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarData)+" ")])],1)},n=[],s=a("ade3"),o=(a("ac1f"),a("1276"),a("b0c0"),i={name:"tFileManage",data:function(){return{valid:!0,state:"delete",editDialog:!1,dialog:!1,search:"",snackbar:!1,snackbarData:"",filePath:"",editedOldName:"",editedItem:{FileName:"",Creater:"",RecentEditTime:"",FileType:""},defaultItem:{FileName:"",Creater:"",RecentEditTime:"",FileType:""},headers:[{text:"",align:"start",value:"iconType",sortable:!1,filterable:!0},{text:"FileName",align:"start",sortable:!0,value:"FileName"},{text:"Creater",align:"start",sortable:!1,value:"Creater"},{text:"RecentEditTime",sortable:!0,value:"RecentEditTime"},{text:"Actions",value:"actions",sortable:!1}],files:[],rules:{mk_fileNameRules:[function(e){return!!e||"filename is none!"},function(e){return e.length>=1&&e.length<=20||"filename must be 1-20 characters!"},function(e){return/^((?!\\|\/|:|\*|\?|<|>|\||'|%|#|&|\.|\^).){1,20}$/.test(e)||"Inlegal input"}]}}},watch:{dialog:function(e){e||this.closeDialog()}},computed:{userName:function(){return this.$store.state.user.username}}},Object(s["a"])(i,"computed",{teamName:function(){return this.$route.query.teamName}}),Object(s["a"])(i,"methods",{initialize:function(){var e=this;console.log("initialize"),this.axios.post(this.targetIP()+"/filemanage.filemanage/getlist",{userName:this.teamName,userType:"TEAM",filePath:this.filePath}).then((function(t){console.log(t);var a=t.data;e.files=a})).catch((function(e){console.log(e)}))},deleteItem:function(e){this.state="delete",this.editedItem=Object.assign({},e),this.dialog=!0},deleteItemConfirm:function(){var e=this;this.axios.post(this.targetIP()+"/filemanage.filemanage/deleteDir",{userName:this.teamName,fileName:this.editedItem.FileName,fileType:this.editedItem.FileType,userType:"TEAM",filePath:this.filePath}).then((function(t){console.log(t),e.initialize()})).catch((function(e){console.log(e)})),this.closeDialog()},addItem:function(e){this.state="add",this.editedItem.FileType=e,this.dialog=!0},addItemConfirm:function(){var e=this,t=this.editedItem.FileName;"FILE"==this.editedItem.FileType&&(t+=".md",console.log("addfile")),this.axios.post(this.targetIP()+"/filemanage.filemanage/createDir",{userName:this.teamName,fileName:t,fileType:this.editedItem.FileType,userType:"TEAM",filePath:this.filePath}).then((function(t){console.log(t.data),1==t.data?(e.snackbarData="You have add an item!",e.snackbar=!0,e.Dialog=!1,e.initialize()):(console.log("addMethod response.data:"+t.data),e.snackbarData="Name is repeated!",e.snackbar=!0)})).catch((function(e){console.log(e)})),this.closeDialog()},editItem:function(e){this.editedItem=e,this.editedOldName=this.editedItem.FileName,this.editDialog=!0},update:function(){var e=this;this.axios.post(this.targetIP()+"/filemanage.filemanage/renameDir",{userName:this.teamName,fileName:this.editedOldName,fileType:this.editedItem.FileType,userType:"TEAM",filePath:this.filePath,newName:this.editedItem.FileName}).then((function(t){console.log(t),1==t.data?(e.initialize(),e.snackbarData="Edit Success!",e.snackbar=!0,e.editDialog=!1):(console.log("edit,return response.data:"+t.data),e.snackbarData="Name is repeated",e.snackbar=!0)})).catch((function(e){console.log(e)}))},pathBack:function(){var e,t="";e=this.filePath.split("/"),t+=e[0];for(var a=1;a<e.length-1;a++)t=t+"/"+e[a];this.filePath=t,this.initialize()},goToPath:function(e){console.log("GOTO "+e.FileName),this.filePath=this.filePath+"/"+e.FileName,this.initialize()},openFile:function(e){var t=this;console.log("open"),this.axios.post(this.targetIP()+"/filemanage.filemanage/getcontent",{userName:this.teamName,fileName:e.FileName,fileType:"FILE",userType:"TEAM",filePath:this.filePath}).then((function(e){var a=e.data;console.log(a),t.$store.commit("setEditingFile",a)})).catch((function(e){console.log(e)})),this.open("Markdown")},closeDialog:function(){var e=this;this.dialog=!1,this.editDialog=!1,this.state="dothing",this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem)}))},open:function(e){this.$route.name!==e&&this.$router.push({name:e})},targetIP:function(){return this.$store.state.targetIP}}),i),r=o,c=a("2877"),d=a("6544"),m=a.n(d),u=a("8336"),f=a("b0af"),h=a("99d9"),v=a("cc20"),g=a("62ad"),p=a("a523"),b=a("8fea"),k=a("169a"),I=a("ce7e"),N=a("4bd4"),x=a("132d"),T=a("0fd9"),F=a("2db4"),_=a("2fa4"),y=a("8654"),D=a("71d9"),C=a("2a7f"),P=Object(c["a"])(r,l,n,!1,null,null,null);t["default"]=P.exports;m()(P,{VBtn:u["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VChip:v["a"],VCol:g["a"],VContainer:p["a"],VDataTable:b["a"],VDialog:k["a"],VDivider:I["a"],VForm:N["a"],VIcon:x["a"],VRow:T["a"],VSnackbar:F["a"],VSpacer:_["a"],VTextField:y["a"],VToolbar:D["a"],VToolbarTitle:C["a"]})}}]);
//# sourceMappingURL=chunk-2d0de705.adb516de.js.map